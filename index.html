<!doctype html>
<html lang="es">
<head> 
    <meta charset="UTF-8"> 
    <meta name="viewport" content="width=device-width, initial-scale=1"> 
    <title>CBO - Empresa</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;700&family=Segoe+UI:wght@400;500&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #00f7ff;
            --secondary: #0066ff;
            --dark: #0a0a1a;
            --light: #f0f8ff;
            --accent: #ff00aa;
            --glow: 0 0 10px rgba(0, 247, 255, 0.7);
            --success: #00ff88;
            --warning: #ffaa00;
            --error: #ff5555;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Orbitron', 'Segoe UI', Arial, sans-serif;
        }
        
        body {
            background-color: var(--dark);
            color: var(--light);
            background-image: 
                radial-gradient(circle at 25% 25%, rgba(0, 247, 255, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 75% 75%, rgba(255, 0, 170, 0.1) 0%, transparent 50%);
            min-height: 100vh;
            overflow-x: hidden;
            display: flex;
            flex-direction: column;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }

        h1 {
            font-size: clamp(2rem, 5vw, 3.5rem);
            margin-bottom: 2rem;
            text-shadow: var(--glow);
            animation: textGlow 2s infinite alternate;
        }

        @keyframes textGlow {
            from { text-shadow: 0 0 5px var(--primary); }
            to { text-shadow: 0 0 20px var(--primary), 0 0 30px var(--secondary); }
        }

        .button-container {
            display: flex;
            flex-wrap: wrap;
            gap: 1.5rem;
            justify-content: center;
            margin-top: 2rem;
        }

        .futuristic-button {
            position: relative;
            padding: 1rem 2rem;
            background: linear-gradient(135deg, rgba(0, 247, 255, 0.1), rgba(0, 103, 255, 0.2));
            border: 1px solid var(--primary);
            border-radius: 50px;
            color: var(--light);
            font-size: 1.1rem;
            font-weight: 500;
            text-decoration: none;
            text-transform: uppercase;
            letter-spacing: 1px;
            cursor: pointer;
            overflow: hidden;
            transition: all 0.3s ease;
            box-shadow: 0 0 15px rgba(0, 247, 255, 0.2);
            z-index: 1;
        }

        .futuristic-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 20px rgba(0, 247, 255, 0.4);
            color: var(--primary);
        }

        .futuristic-button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(0, 247, 255, 0.2), transparent);
            transition: 0.5s;
            z-index: -1;
        }

        .futuristic-button:hover::before {
            left: 100%;
        }

        /* Asistente Virtual - Estilos optimizados */
        .assistant-container {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 1000;
            transition: transform 0.3s ease;
        }

        .assistant-container.minimized {
            transform: translateY(calc(100% - 70px));
        }

        .assistant-button {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            border: none;
            color: white;
            font-size: 24px;
            cursor: pointer;
            box-shadow: 0 0 20px rgba(0, 247, 255, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            position: relative;
        }

        .assistant-button.active {
            transform: rotate(360deg);
            box-shadow: 0 0 30px var(--accent);
        }

        .assistant-button:hover {
            transform: scale(1.1);
            box-shadow: 0 0 30px rgba(0, 247, 255, 0.8);
        }

        .assistant-chat {
            position: absolute;
            bottom: 80px;
            right: 0;
            width: 100%;
            max-width: 350px;
            max-height: 70vh;
            background: rgba(10, 10, 26, 0.95);
            border: 1px solid var(--primary);
            border-radius: 15px 15px 0 15px;
            padding: 15px;
            box-shadow: 0 0 30px rgba(0, 247, 255, 0.3);
            display: none;
            flex-direction: column;
            backdrop-filter: blur(10px);
            transform-origin: bottom right;
        }

        .assistant-chat.active {
            display: flex;
            animation: fadeInUp 0.4s ease-out;
        }

        .chat-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
            padding-bottom: 10px;
            border-bottom: 1px solid rgba(0, 247, 255, 0.2);
        }

        .chat-title {
            color: var(--primary);
            font-weight: bold;
            text-shadow: 0 0 5px var(--primary);
            font-size: 1.1rem;
        }

        .chat-actions {
            display: flex;
            gap: 10px;
        }

        .chat-action {
            background: none;
            border: none;
            color: var(--light);
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.2s ease;
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
        }

        .chat-action:hover {
            color: var(--primary);
            background: rgba(0, 247, 255, 0.1);
        }

        .chat-messages {
            flex: 1;
            overflow-y: auto;
            margin-bottom: 10px;
            padding-right: 5px;
            scroll-behavior: smooth;
        }

        .chat-message {
            margin-bottom: 15px;
            padding: 10px 15px;
            border-radius: 12px;
            line-height: 1.4;
            font-size: 0.9rem;
            position: relative;
            opacity: 0;
            animation: messageFadeIn 0.3s ease forwards;
            max-width: 85%;
            word-wrap: break-word;
        }

        @keyframes messageFadeIn {
            to { opacity: 1; transform: translateY(0); }
        }

        .assistant-message {
            background: rgba(0, 247, 255, 0.1);
            border-left: 3px solid var(--primary);
            align-self: flex-start;
            margin-right: auto;
        }

        .user-message {
            background: rgba(255, 0, 170, 0.1);
            border-right: 3px solid var(--accent);
            align-self: flex-end;
            margin-left: auto;
            text-align: right;
        }

        .system-message {
            background: rgba(255, 170, 0, 0.1);
            border-left: 3px solid var(--warning);
            margin: 5px auto;
            text-align: center;
            font-size: 0.8rem;
            padding: 5px 10px;
            width: 90%;
        }

        .message-time {
            display: block;
            font-size: 0.7rem;
            opacity: 0.6;
            margin-top: 3px;
        }

        .chat-input-container {
            display: flex;
            gap: 8px;
            margin-top: 10px;
        }

        .chat-input {
            flex: 1;
            padding: 10px 15px;
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid var(--primary);
            border-radius: 20px;
            color: white;
            font-family: 'Segoe UI', Arial, sans-serif;
            transition: all 0.3s ease;
            font-size: 0.9rem;
        }

        .chat-input:focus {
            outline: none;
            border-color: var(--accent);
            box-shadow: 0 0 10px rgba(255, 0, 170, 0.3);
        }

        .chat-send {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            border: none;
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .chat-send:hover {
            transform: scale(1.1);
            box-shadow: 0 0 10px var(--primary);
        }

        .chat-options {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 10px;
        }

        .chat-option {
            padding: 8px 12px;
            background: rgba(0, 103, 255, 0.2);
            border: 1px solid var(--primary);
            border-radius: 20px;
            color: var(--light);
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 0.8rem;
            flex-grow: 1;
            text-align: center;
            min-width: calc(50% - 4px);
        }

        .chat-option:hover {
            background: rgba(0, 247, 255, 0.3);
            transform: translateY(-2px);
        }

        .typing-indicator {
            display: inline-flex;
            align-items: center;
            padding: 8px 15px;
            background: rgba(0, 247, 255, 0.1);
            border-radius: 20px;
            margin-bottom: 15px;
        }

        .typing-dot {
            width: 6px;
            height: 6px;
            background-color: var(--primary);
            border-radius: 50%;
            margin: 0 2px;
            animation: typingAnimation 1.4s infinite ease-in-out;
        }

        .typing-dot:nth-child(2) { animation-delay: 0.2s; }
        .typing-dot:nth-child(3) { animation-delay: 0.4s; }

        @keyframes typingAnimation {
            0%, 60%, 100% { transform: translateY(0); }
            30% { transform: translateY(-5px); }
        }

        .notification-badge {
            position: absolute;
            top: -5px;
            right: -5px;
            background: var(--accent);
            color: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.7rem;
            font-weight: bold;
            animation: pulse 1.5s infinite;
        }

        .notification-pulse {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border-radius: 50%;
            background: rgba(255, 0, 170, 0.3);
            animation: pulseRing 2s infinite;
            pointer-events: none;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.2); opacity: 0.8; }
        }

        @keyframes pulseRing {
            0% { transform: scale(0.8); opacity: 1; }
            100% { transform: scale(1.3); opacity: 0; }
        }

        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Notificación Toast */
        .toast-notification {
            position: fixed;
            bottom: 100px;
            right: 20px;
            background: rgba(10, 10, 26, 0.95);
            border: 1px solid var(--primary);
            border-radius: 10px;
            padding: 15px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.3);
            max-width: 300px;
            display: flex;
            align-items: center;
            gap: 10px;
            transform: translateX(150%);
            transition: transform 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            z-index: 1001;
        }

        .toast-notification.show {
            transform: translateX(0);
        }

        .toast-icon {
            font-size: 20px;
            color: var(--primary);
            flex-shrink: 0;
        }

        .toast-content {
            flex: 1;
        }

        .toast-title {
            font-weight: bold;
            margin-bottom: 5px;
            color: var(--primary);
            font-size: 0.9rem;
        }

        .toast-message {
            font-size: 0.8rem;
            line-height: 1.4;
        }

        .toast-close {
            background: none;
            border: none;
            color: var(--light);
            cursor: pointer;
            font-size: 1rem;
            align-self: flex-start;
        }

        /* Efectos de partículas */
        .particles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
        }

        .particle {
            position: absolute;
            background-color: var(--primary);
            border-radius: 50%;
            animation: floatUp linear infinite;
        }

        @keyframes floatUp {
            0% { transform: translateY(0) rotate(0deg); opacity: 0; }
            10% { opacity: 1; }
            90% { opacity: 1; }
            100% { transform: translateY(-100vh) rotate(360deg); opacity: 0; }
        }

        /* Responsive */
        @media (max-width: 768px) {
            .assistant-chat {
                width: 90vw;
                max-width: none;
                right: 5vw;
            }
            
            .chat-option {
                min-width: 100%;
            }
            
            .button-container {
                flex-direction: column;
                gap: 1rem;
            }
            
            .futuristic-button {
                width: 100%;
                text-align: center;
            }
        }
    </style>
</head> 
<body> 
    <main class="container">
        <h1>BIENVENIDO</h1>

        <div class="button-container">
            <a href="Inicio/index.html" class="futuristic-button">Inicio</a>
            <a href="CubaHostPro/index.html" class="futuristic-button">CubaHostPro</a>
            <a href="Empleo/index.html" class="futuristic-button">Empleo</a>
        </div>
    </main>

    <!-- Efecto de partículas -->
    <div class="particles" id="particles"></div>

    <!-- Asistente Virtual -->
    <div class="assistant-container" id="assistantContainer">
        <button class="assistant-button" id="assistantButton" aria-label="Abrir asistente virtual">
            <span>🤖</span>
            <span class="notification-badge" id="notificationBadge" style="display: none;"></span>
            <span class="notification-pulse" id="notificationPulse" style="display: none;"></span>
        </button>
        <div class="assistant-chat" id="assistantChat">
            <div class="chat-header">
                <div class="chat-title">Asistente CBO</div>
                <div class="chat-actions">
                    <button class="chat-action" id="minimizeChat" aria-label="Minimizar chat">−</button>
                    <button class="chat-action" id="closeChat" aria-label="Cerrar chat">×</button>
                </div>
            </div>
            <div class="chat-messages" id="chatMessages"></div>
            <div class="chat-input-container">
                <input type="text" class="chat-input" id="chatInput" placeholder="Escribe tu mensaje..." autocomplete="off" aria-label="Mensaje">
                <button class="chat-send" id="chatSend" aria-label="Enviar mensaje">→</button>
            </div>
            <div class="chat-options" id="chatOptions"></div>
        </div>
    </div>

    <!-- Notificación Toast -->
    <div class="toast-notification" id="toastNotification" role="alert">
        <div class="toast-icon">💡</div>
        <div class="toast-content">
            <div class="toast-title" id="toastTitle">Nueva notificación</div>
            <div class="toast-message" id="toastMessage"></div>
        </div>
        <button class="toast-close" id="toastClose" aria-label="Cerrar notificación">×</button>
    </div>

    <script>
        // Base de conocimiento del asistente
        const knowledgeBase = {
            greetings: ["¡Hola! Soy tu asistente CBO. 😊", "¿En qué puedo ayudarte hoy?", "Bienvenido de nuevo al sistema CBO."],
            cbo: {
                description: "CBO es un emprendimiento cubano innovador dedicado al desarrollo tecnológico y servicios digitales.",
                services: ["Hosting especializado (CubaHostPro)", "Desarrollo web", "Soluciones empresariales", "Oportunidades de empleo"],
                mission: "Nuestra misión es impulsar el desarrollo tecnológico en Cuba con soluciones accesibles y de calidad."
            },
            cubahostpro: {
                description: "CubaHostPro es nuestro servicio premium de hosting con:",
                features: ["99.9% uptime", "Soporte 24/7", "Seguridad avanzada", "Almacenamiento SSD", "Dominio .cu incluido"],
                plans: {
                    basic: "$10/mes - 10GB almacenamiento",
                    pro: "$20/mes - 25GB almacenamiento + SSL",
                    enterprise: "$50/mes - Recursos dedicados"
                }
            },
            employment: {
                description: "Actualmente buscamos talentos en:",
                positions: ["Desarrolladores Full-Stack", "Diseñadores UI/UX", "Especialistas en Marketing Digital", "Soporte Técnico"],
                process: "Envía tu CV a empleo@cbo.cu con el asunto 'Aplicación: [Puesto]'"
            },
            farewells: ["¡Hasta luego! 😊", "Fue un placer ayudarte.", "No dudes en volver si necesitas más ayuda."],
            smallTalk: {
                greetings: ["¡Hola humano! 👋", "¿Cómo estás hoy?", "¡Buen día!"],
                compliments: ["Eres un usuario excelente.", "Me encanta interactuar contigo.", "¡Buena elección!"],
                funFacts: [
                    "¿Sabías que Cuba fue uno de los primeros países de Latinoamérica en tener acceso a Internet?",
                    "El primer sitio web cubano se creó en 1996.",
                    "CBO significa 'Cuba Business Opportunities'"
                ]
            },
            errorResponses: [
                "No estoy seguro de entender. ¿Podrías reformular?",
                "Mi conocimiento no cubre esa pregunta aún.",
                "Vamos a enfocarnos en los servicios de CBO."
            ]
        };

        // Clase del Asistente Virtual
        class VirtualAssistant {
            constructor() {
                this.elements = {
                    container: document.getElementById('assistantContainer'),
                    button: document.getElementById('assistantButton'),
                    chat: document.getElementById('assistantChat'),
                    messages: document.getElementById('chatMessages'),
                    options: document.getElementById('chatOptions'),
                    input: document.getElementById('chatInput'),
                    sendButton: document.getElementById('chatSend'),
                    minimizeButton: document.getElementById('minimizeChat'),
                    closeButton: document.getElementById('closeChat'),
                    notificationBadge: document.getElementById('notificationBadge'),
                    notificationPulse: document.getElementById('notificationPulse'),
                    toast: document.getElementById('toastNotification'),
                    toastClose: document.getElementById('toastClose')
                };
                
                this.state = {
                    isOpen: false,
                    isMinimized: false,
                    unreadMessages: 0,
                    typingTimeout: null,
                    notificationCheckInterval: null,
                    conversationContext: {
                        currentTopic: null,
                        lastMessage: null,
                        userName: null,
                        notificationPermission: false,
                        conversationHistory: []
                    }
                };
                
                this.init();
            }
            
            init() {
                this.setupEventListeners();
                this.createParticles();
                this.typeWriterEffect();
                this.initAssistant();
            }
            
            setupEventListeners() {
                // Botón del asistente
                this.elements.button.addEventListener('click', () => this.toggleChat());
                
                // Minimizar/cerrar chat
                this.elements.minimizeButton.addEventListener('click', () => this.toggleMinimize());
                this.elements.closeButton.addEventListener('click', () => this.closeChat());
                
                // Enviar mensaje
                this.elements.sendButton.addEventListener('click', () => this.sendUserMessage());
                this.elements.input.addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') this.sendUserMessage();
                });
                
                // Cerrar notificación toast
                this.elements.toastClose.addEventListener('click', () => {
                    this.elements.toast.classList.remove('show');
                });
                
                // Detección de inactividad
                let inactivityTimer;
                const resetTimer = () => {
                    clearTimeout(inactivityTimer);
                    inactivityTimer = setTimeout(() => {
                        if (!this.state.isOpen && Math.random() > 0.5) {
                            this.showProactiveNotification();
                        }
                    }, 30000);
                };
                
                window.addEventListener('mousemove', resetTimer);
                window.addEventListener('keypress', resetTimer);
                resetTimer();
            }
            
            createParticles() {
                const particlesContainer = document.getElementById('particles');
                const particleCount = 30;
                
                for (let i = 0; i < particleCount; i++) {
                    const particle = document.createElement('div');
                    particle.classList.add('particle');
                    
                    const size = Math.random() * 2 + 1;
                    particle.style.width = `${size}px`;
                    particle.style.height = `${size}px`;
                    
                    particle.style.left = `${Math.random() * 100}%`;
                    particle.style.bottom = `-10px`;
                    
                    const duration = Math.random() * 10 + 10;
                    particle.style.animationDuration = `${duration}s`;
                    particle.style.animationDelay = `${Math.random() * 10}s`;
                    
                    particlesContainer.appendChild(particle);
                }
            }
            
            typeWriterEffect() {
                const title = document.querySelector('h1');
                const text = title.textContent;
                title.textContent = '';
                
                let i = 0;
                const speed = 100;
                
                const type = () => {
                    if (i < text.length) {
                        title.textContent += text.charAt(i);
                        i++;
                        setTimeout(type, speed);
                    }
                };
                
                setTimeout(type, 500);
            }
            
            initAssistant() {
                setTimeout(() => {
                    this.addSystemMessage("Sistema: Asistente virtual inicializado");
                    this.showTypingIndicator();
                    
                    setTimeout(() => {
                        this.removeTypingIndicator();
                        this.addAssistantMessage(this.getRandomResponse('greetings'));
                        this.showMainOptions();
                        
                        setTimeout(() => {
                            this.requestNotificationPermission();
                        }, 3000);
                    }, 1500);
                }, 2000);
            }
            
            toggleChat() {
                if (this.state.isMinimized) {
                    this.state.isMinimized = false;
                    this.elements.container.classList.remove('minimized');
                    setTimeout(() => {
                        this.state.isOpen = true;
                        this.elements.chat.classList.add('active');
                        this.elements.button.classList.add('active');
                    }, 300);
                } else {
                    this.state.isOpen = !this.state.isOpen;
                    this.elements.chat.classList.toggle('active', this.state.isOpen);
                    this.elements.button.classList.toggle('active', this.state.isOpen);
                }
                
                if (this.state.isOpen) {
                    this.state.unreadMessages = 0;
                    this.updateNotificationBadge();
                    this.scrollToBottom();
                }
            }
            
            toggleMinimize() {
                this.state.isMinimized = !this.state.isMinimized;
                this.elements.container.classList.toggle('minimized', this.state.isMinimized);
                
                if (!this.state.isMinimized) {
                    this.state.isOpen = true;
                    this.elements.chat.classList.add('active');
                }
            }
            
            closeChat() {
                this.state.isOpen = false;
                this.state.isMinimized = false;
                this.elements.chat.classList.remove('active');
                this.elements.container.classList.remove('minimized');
                this.elements.button.classList.remove('active');
            }
            
            showTypingIndicator() {
                const typing = document.createElement('div');
                typing.className = 'typing-indicator';
                typing.id = 'typingIndicator';
                typing.innerHTML = `
                    <div class="typing-dot"></div>
                    <div class="typing-dot"></div>
                    <div class="typing-dot"></div>
                `;
                this.elements.messages.appendChild(typing);
                this.scrollToBottom();
            }
            
            removeTypingIndicator() {
                const typing = document.getElementById('typingIndicator');
                if (typing) typing.remove();
            }
            
            addMessage(text, type = 'assistant') {
                const message = document.createElement('div');
                message.className = `chat-message ${type}-message`;
                
                const now = new Date();
                const timeString = now.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
                
                message.innerHTML = `
                    ${text}
                    <span class="message-time">${timeString}</span>
                `;
                
                this.elements.messages.appendChild(message);
                this.scrollToBottom();
                
                this.state.conversationContext.conversationHistory.push({
                    type,
                    text,
                    time: now
                });
                
                return message;
            }
            
            addAssistantMessage(text) {
                return this.addMessage(text, 'assistant');
            }
            
            addUserMessage(text) {
                return this.addMessage(text, 'user');
            }
            
            addSystemMessage(text) {
                return this.addMessage(text, 'system');
            }
            
            scrollToBottom() {
                this.elements.messages.scrollTop = this.elements.messages.scrollHeight;
            }
            
            sendUserMessage() {
                const message = this.elements.input.value.trim();
                if (message === '') return;
                
                this.addUserMessage(message);
                this.elements.input.value = '';
                this.processUserInput(message);
            }
            
            processUserInput(input) {
                if (this.state.typingTimeout) clearTimeout(this.state.typingTimeout);
                
                this.showTypingIndicator();
                const processingTime = Math.random() * 1500 + 500;
                
                this.state.typingTimeout = setTimeout(() => {
                    this.removeTypingIndicator();
                    this.generateResponse(input);
                }, processingTime);
            }
            
            generateResponse(input) {
                const lowerInput = input.toLowerCase();
                this.state.conversationContext.lastMessage = input;
                
                if (this.isGreeting(lowerInput)) {
                    this.handleGreeting();
                } 
                else if (this.isAboutCBO(lowerInput)) {
                    this.handleCBOQuestion();
                }
                else if (this.isAboutCubaHostPro(lowerInput)) {
                    this.handleCubaHostProQuestion();
                }
                else if (this.isAboutEmployment(lowerInput)) {
                    this.handleEmploymentQuestion();
                }
                else if (this.isGoodbye(lowerInput)) {
                    this.handleGoodbye();
                }
                else if (this.isSmallTalk(lowerInput)) {
                    this.handleSmallTalk();
                }
                else {
                    this.handleUnknownInput();
                }
            }
            
            isGreeting(input) {
                const greetings = ['hola', 'hi', 'hey', 'buenos días', 'buenas tardes', 'buenas noches'];
                return greetings.some(g => input.includes(g));
            }
            
            isAboutCBO(input) {
                const keywords = ['cbo', 'qué es', 'quienes son', 'servicios', 'empresa', 'emprendimiento'];
                return keywords.some(k => input.includes(k));
            }
            
            isAboutCubaHostPro(input) {
                const keywords = ['cubahostpro', 'hosting', 'alojamiento', 'servidor', 'dominio', 'web'];
                return keywords.some(k => input.includes(k));
            }
            
            isAboutEmployment(input) {
                const keywords = ['empleo', 'trabajo', 'vacante', 'contratar', 'cv', 'curriculum'];
                return keywords.some(k => input.includes(k));
            }
            
            isGoodbye(input) {
                const goodbyes = ['adiós', 'hasta luego', 'nos vemos', 'chao', 'bye', 'gracias'];
                return goodbyes.some(g => input.includes(g));
            }
            
            isSmallTalk(input) {
                const smallTalk = ['cómo estás', 'qué tal', 'cuéntame', 'sabías', 'divertido', 'gracioso'];
                return smallTalk.some(s => input.includes(s));
            }
            
            handleGreeting() {
                const response = this.getRandomResponse('greetings');
                this.addAssistantMessage(response);
                this.showMainOptions();
            }
            
            handleCBOQuestion() {
                this.addAssistantMessage(knowledgeBase.cbo.description);
                
                setTimeout(() => {
                    this.addAssistantMessage("Ofrecemos estos servicios:");
                    const servicesList = knowledgeBase.cbo.services.map(s => `• ${s}`).join('\n');
                    this.addAssistantMessage(servicesList);
                    
                    setTimeout(() => {
                        this.showOptions([
                            { text: "Más sobre CubaHostPro", action: () => this.handleCubaHostProQuestion() },
                            { text: "Ver empleos", action: () => this.handleEmploymentQuestion() },
                            { text: "Volver al inicio", action: () => this.showMainOptions() }
                        ]);
                    }, 800);
                }, 800);
            }
            
            handleCubaHostProQuestion() {
                this.addAssistantMessage(knowledgeBase.cubahostpro.description);
                
                setTimeout(() => {
                    const featuresList = knowledgeBase.cubahostpro.features.map(f => `• ${f}`).join('\n');
                    this.addAssistantMessage(featuresList);
                    
                    setTimeout(() => {
                        this.addAssistantMessage("Nuestros planes:");
                        const plansList = Object.entries(knowledgeBase.cubahostpro.plans)
                            .map(([plan, desc]) => `◈ ${plan.toUpperCase()}: ${desc}`)
                            .join('\n');
                        this.addAssistantMessage(plansList);
                        
                        setTimeout(() => {
                            this.showOptions([
                                {
                                    text: "Quiero contratar",
                                    action: () => {
                                        this.addAssistantMessage("Excelente elección. Redirigiendo a CubaHostPro...");
                                        setTimeout(() => {
                                            window.location.href = "CubaHostPro/index.html";
                                        }, 1500);
                                    }
                                },
                                {
                                    text: "Más información",
                                    action: () => {
                                        this.addAssistantMessage("¿Qué más te gustaría saber sobre CubaHostPro?");
                                        this.showOptions([
                                            {
                                                text: "Especificaciones técnicas",
                                                action: () => this.addAssistantMessage("Todos nuestros servidores usan tecnología SSD con protección DDoS y copias de seguridad diarias.")
                                            },
                                            {
                                                text: "Soporte técnico",
                                                action: () => this.addAssistantMessage("Ofrecemos soporte 24/7 por email, chat y teléfono para todos nuestros clientes.")
                                            },
                                            {
                                                text: "Volver",
                                                action: () => this.handleCubaHostProQuestion()
                                            }
                                        ]);
                                    }
                                },
                                {
                                    text: "Volver al inicio",
                                    action: () => this.showMainOptions()
                                }
                            ]);
                        }, 800);
                    }, 800);
                }, 800);
            }
            
            handleEmploymentQuestion() {
                this.addAssistantMessage(knowledgeBase.employment.description);
                
                setTimeout(() => {
                    const positionsList = knowledgeBase.employment.positions.map(p => `• ${p}`).join('\n');
                    this.addAssistantMessage(positionsList);
                    
                    setTimeout(() => {
                        this.addAssistantMessage(`Proceso de aplicación: ${knowledgeBase.employment.process}`);
                        
                        setTimeout(() => {
                            this.showOptions([
                                {
                                    text: "Enviar mi CV",
                                    action: () => {
                                        this.addAssistantMessage("Redirigiendo a tu cliente de email...");
                                        setTimeout(() => {
                                            window.location.href = "mailto:empleo@cbo.cu?subject=Aplicación%20de%20empleo";
                                        }, 1500);
                                    }
                                },
                                {
                                    text: "Requisitos técnicos",
                                    action: () => this.addAssistantMessage("Para posiciones técnicas requerimos al menos 2 años de experiencia o portafolio demostrable.")
                                },
                                {
                                    text: "Volver al inicio",
                                    action: () => this.showMainOptions()
                                }
                            ]);
                        }, 800);
                    }, 800);
                }, 800);
            }
            
            handleGoodbye() {
                const response = this.getRandomResponse('farewells');
                this.addAssistantMessage(response);
                
                setTimeout(() => {
                    this.closeChat();
                }, 1500);
            }
            
            handleSmallTalk() {
                const randomCategory = Math.random() > 0.5 ? 'compliments' : 'funFacts';
                const response = this.getRandomResponse(['smallTalk', randomCategory].join('.'));
                this.addAssistantMessage(response);
                
                setTimeout(() => {
                    this.showMainOptions();
                }, 1000);
            }
            
            handleUnknownInput() {
                const response = this.getRandomResponse('errorResponses');
                this.addAssistantMessage(response);
                
                setTimeout(() => {
                    this.showMainOptions();
                }, 1000);
            }
            
            getRandomResponse(path) {
                const parts = path.split('.');
                let current = knowledgeBase;
                
                for (const part of parts) {
                    current = current[part];
                    if (!current) break;
                }
                
                if (Array.isArray(current)) {
                    return current[Math.floor(Math.random() * current.length)];
                }
                
                return "No tengo una respuesta para eso. ¿Puedes reformular tu pregunta?";
            }
            
            showMainOptions() {
                this.showOptions([
                    { text: "¿Qué es CBO?", action: () => this.handleCBOQuestion() },
                    { text: "Información CubaHostPro", action: () => this.handleCubaHostProQuestion() },
                    { text: "Oportunidades de empleo", action: () => this.handleEmploymentQuestion() }
                ]);
            }
            
            showOptions(options) {
                this.elements.options.innerHTML = '';
                
                options.forEach(option => {
                    const button = document.createElement('div');
                    button.className = 'chat-option';
                    button.textContent = option.text;
                    button.addEventListener('click', option.action);
                    this.elements.options.appendChild(button);
                });
                
                this.scrollToBottom();
            }
            
            showProactiveNotification() {
                const notifications = [
                    "¿Necesitas ayuda con nuestros servicios?",
                    "Tenemos nuevas ofertas disponibles",
                    "Consulta nuestras últimas novedades",
                    "¿Sabías que puedes alojar tu sitio web desde $10/mes?"
                ];
                
                const randomNotification = notifications[Math.floor(Math.random() * notifications.length)];
                this.showNotification("Recordatorio", randomNotification);
            }
            
            showNotification(title, message) {
                if (!this.state.isOpen) {
                    this.state.unreadMessages++;
                    this.updateNotificationBadge();
                    
                    this.elements.notificationPulse.style.display = 'block';
                    setTimeout(() => {
                        this.elements.notificationPulse.style.display = 'none';
                    }, 2000);
                }
                
                this.showToast(title, message);
                
                if (this.state.conversationContext.notificationPermission) {
                    this.showBrowserNotification(title, message);
                }
                
                this.addSystemMessage(`Notificación: ${message}`);
            }
            
            showToast(title, message, duration = 5000) {
                const toastTitle = document.getElementById('toastTitle');
                const toastMessage = document.getElementById('toastMessage');
                
                toastTitle.textContent = title;
                toastMessage.textContent = message;
                
                this.elements.toast.classList.add('show');
                
                setTimeout(() => {
                    this.elements.toast.classList.remove('show');
                }, duration);
            }
            
            showBrowserNotification(title, message) {
                if ("Notification" in window && Notification.permission === "granted") {
                    new Notification(title, {
                        body: message,
                        icon: "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1MTIgNTEyIj48cGF0aCBmaWxsPSIjMDBmN2ZmIiBkPSJNMjU2IDhDMTE5IDggOCAxMTkgOCAyNTZzMTExIDI0OCAyNDggMjQ4IDI0OC0xMTEgMjQ4LTI0OFMzOTMgOCAyNTYgOHptMCA0NDhjLTExMC41IDAtMjAwLTg5LjUtMjAwLTIwMFMxNDUuNSA1NiAyNTYgNTZzMjAwIDg5LjUgMjAwIDIwMC04OS41IDIwMC0yMDAgMjAwem02Mi4yLTE0Ni4yYy0xOC43IDE4LjctNDkuMSAxOC43LTY3LjkgMGwtNjcuOS02Ny45TDE1My4zIDI1NmwtNjcuOS02Ny45Yy0xOC43LTE4LjctMTguNy00OS4xIDAtNjcuOSAxOC43LTE4LjcgNDkuMS0xOC43IDY3LjkgMGw2Ny45IDY3LjkgNjcuOS02Ny45YzE4LjctMTguNyA0OS4xLTE4LjcgNjcuOSAwIDE4LjcgMTguNyAxOC43IDQ5LjEgMCA2Ny45TDMyOS4zIDI1Nmw2Ny45IDY3LjljMTguNyAxOC43IDE4NyA0OS4xIDAgNjcuOXoiLz48L3N2Zz4="
                    });
                }
            }
            
            updateNotificationBadge() {
                if (this.state.unreadMessages > 0) {
                    this.elements.notificationBadge.style.display = 'flex';
                    this.elements.notificationBadge.textContent = this.state.unreadMessages > 9 ? '9+' : this.state.unreadMessages;
                } else {
                    this.elements.notificationBadge.style.display = 'none';
                }
            }
            
            requestNotificationPermission() {
                if ("Notification" in window) {
                    Notification.requestPermission().then(permission => {
                        if (permission === "granted") {
                            this.state.conversationContext.notificationPermission = true;
                            this.addSystemMessage("Notificaciones del navegador activadas");
                        }
                    });
                }
            }
        }

        // Inicializar la aplicación cuando el DOM esté listo
        document.addEventListener('DOMContentLoaded', () => {
            new VirtualAssistant();
        });
    </script>
</body>
</html>